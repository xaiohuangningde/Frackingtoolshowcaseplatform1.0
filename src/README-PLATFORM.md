# å‹è£‚å·¥å…·æ•°å­—åŒ–å±•ç¤ºå¹³å°

## ğŸ¯ é¡¹ç›®ç®€ä»‹

ä¸€ä¸ªåŸºäº React + Supabase + Model-Viewer çš„å·¥ä¸šçº§ 3D å·¥å…·å±•ç¤ºå¹³å°ï¼Œæ”¯æŒï¼š

- âœ… å®æ—¶æ•°æ®åŒæ­¥ï¼ˆ5ç§’è½®è¯¢ï¼‰
- âœ… 3D æ¨¡å‹åœ¨çº¿/ç¦»çº¿å±•ç¤º
- âœ… åˆ†ç»„ç®¡ç†ï¼ˆé‡å‘½å/åˆ é™¤ï¼‰
- âœ… äº‘ç«¯æ•°æ®æŒä¹…åŒ–
- âœ… å†…ç½‘ç¯å¢ƒé€‚é…

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React 18 + TypeScript + Tailwind CSS
- **åç«¯**: Supabase Edge Functions (Hono)
- **æ•°æ®åº“**: Supabase KV Store
- **3D æ¸²æŸ“**: Google Model-Viewer (Web Component)

## ğŸ“ é¡¹ç›®ç»“æ„

```
/src
  /components       # UI ç»„ä»¶
    - Sidebar.tsx          # åˆ†ç»„ä¾§è¾¹æ 
    - ToolCard.tsx         # å·¥å…·å¡ç‰‡
    - ModelDetail.tsx      # 3D æ¨¡å‹è¯¦æƒ…
    - UploadDialog.tsx     # æ·»åŠ å·¥å…·å¼¹çª—
    - DeploymentGuide.tsx  # éƒ¨ç½²è¯´æ˜
  /hooks           # è‡ªå®šä¹‰ Hooks
    - use-tools.ts         # æ•°æ®ç®¡ç†
    - use-model-viewer.ts  # 3D å¼•æ“åŠ è½½
  /lib             # å·¥å…·åº“
    - supabase.ts          # API è¯·æ±‚å°è£…
  /types           # TypeScript ç±»å‹å®šä¹‰
  config.ts        # å¹³å°é…ç½®ï¼ˆCDN/æœ¬åœ°åˆ‡æ¢ï¼‰

/supabase/functions/server
  - index.tsx      # API è·¯ç”±å®šä¹‰
  - kv_store.tsx   # KV æ•°æ®åº“å°è£…
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ æµ‹è¯•æ•°æ®

ç‚¹å‡»é¡µé¢å³ä¸Šè§’ **"æ·»åŠ å·¥å…·"** æŒ‰é’®ï¼Œç„¶åç‚¹å‡» **"ğŸ² å¿«é€Ÿå¡«å……æµ‹è¯•æ•°æ®"**ï¼Œå³å¯è‡ªåŠ¨å¡«å……ç¤ºä¾‹æ•°æ®ã€‚

### 2. æ•°æ®è‡ªåŠ¨ä¿å­˜

æ‰€æœ‰æ•°æ®ä¼šè‡ªåŠ¨ä¿å­˜åˆ° Supabase äº‘ç«¯ KV å­˜å‚¨ï¼Œåˆ·æ–°é¡µé¢æˆ–åœ¨å…¶ä»–è®¾å¤‡æ‰“å¼€éƒ½ä¼šåŒæ­¥ã€‚

### 3. æŸ¥çœ‹ 3D æ¨¡å‹

ç‚¹å‡»ä»»æ„å·¥å…·å¡ç‰‡ï¼Œå³å¯è¿›å…¥å…¨å± 3D æŸ¥çœ‹å™¨ï¼Œæ”¯æŒï¼š
- ğŸ–±ï¸ é¼ æ ‡æ‹–æ‹½æ—‹è½¬
- ğŸ” æ»šè½®ç¼©æ”¾
- ğŸ”„ è‡ªåŠ¨æ—‹è½¬å±•ç¤º
- ğŸ“± å³ä¾§ä¿¡æ¯é¢æ¿

## âš™ï¸ é…ç½®è¯´æ˜

### åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼

ç¼–è¾‘ `/src/config.ts`ï¼š

```typescript
MODEL_VIEWER: {
  USE_CDN: false,  // æ”¹ä¸º false ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
  ...
}
```

ç„¶åä¸‹è½½ model-viewer åˆ°æœ¬åœ°ï¼š

```bash
mkdir -p public/libs
wget https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js \
     -O public/libs/model-viewer.min.js
```

## ğŸ”Œ API ç«¯ç‚¹

æ‰€æœ‰ API éƒ½å·²åœ¨ `/supabase/functions/server/index.tsx` ä¸­å®ç°ï¼š

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/tools` | è·å–æ‰€æœ‰å·¥å…· |
| POST | `/tools` | æ·»åŠ æ–°å·¥å…· |
| PUT | `/tools/:id` | æ›´æ–°å·¥å…· |
| DELETE | `/tools/:id` | åˆ é™¤å·¥å…· |
| POST | `/groups/rename` | é‡å‘½ååˆ†ç»„ |
| POST | `/groups/delete` | åˆ é™¤åˆ†ç»„ |

## ğŸ“ æ•°æ®ç»“æ„

```typescript
interface FrackingTool {
  id: string;           // UUID
  name: string;         // å·¥å…·åç§°
  group: string;        // æ‰€å±åˆ†ç»„
  description: string;  // æŠ€æœ¯å‚æ•°æè¿°
  posterUrl: string;    // å°é¢å›¾ URL (CDN)
  modelUrl: string;     // 3D æ¨¡å‹ URL (.glb/.gltf)
  createdAt: number;    // åˆ›å»ºæ—¶é—´æˆ³
}
```

## ğŸ¨ æ ·å¼è§„èŒƒ

- **é…è‰²**: çº¯ç™½èƒŒæ™¯ + æç»†è¾¹æ¡† (#E5E7EB) + æ·±ç°æ–‡å­— (#111827)
- **å­—ä½“**: ç»§æ‰¿ Tailwind é»˜è®¤å­—ä½“æ ˆ
- **é—´è·**: éµå¾ª Tailwind 8px åŸºç¡€å•ä½
- **åœ†è§’**: å¡ç‰‡ 12px (rounded-xl)ï¼ŒæŒ‰é’® 8px (rounded-lg)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹æ–‡ä»¶æ ¼å¼**: ä»…æ”¯æŒ `.glb` æˆ– `.gltf` æ ¼å¼
2. **URL è¦æ±‚**: æ‰€æœ‰èµ„æºå¿…é¡»é€šè¿‡ CDN URL å¼•ç”¨ï¼ˆä¸æ”¯æŒæœ¬åœ°ä¸Šä¼ ï¼‰
3. **è·¨åŸŸé—®é¢˜**: ç¡®ä¿ 3D æ¨¡å‹ URL å…è®¸è·¨åŸŸè®¿é—®ï¼ˆCORSï¼‰
4. **æ–‡ä»¶å¤§å°**: å»ºè®®æ¨¡å‹æ–‡ä»¶ < 10MBï¼Œå°é¢å›¾ < 500KB

## ğŸ”§ æ•…éšœæ’æŸ¥

### æ•°æ®ä¿å­˜å¤±è´¥

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚
2. ç¡®è®¤ Supabase åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
3. æŸ¥çœ‹ `/utils/supabase/info.tsx` é…ç½®æ˜¯å¦æ­£ç¡®

### 3D æ¨¡å‹æ— æ³•åŠ è½½

1. æ£€æŸ¥æ¨¡å‹ URL æ˜¯å¦å¯è®¿é—®
2. ç¡®è®¤æ–‡ä»¶æ ¼å¼ä¸º `.glb` æˆ– `.gltf`
3. æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ CORS è·¨åŸŸé—®é¢˜
4. åœ¨æ¨¡å‹è¯¦æƒ…é¡µåº•éƒ¨æŸ¥çœ‹é”™è¯¯æç¤º

## ğŸ“¦ æœªæ¥æ‰©å±•

- [ ] æ”¯æŒæ¨¡å‹æ–‡ä»¶ä¸Šä¼ ï¼ˆSupabase Storageï¼‰
- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] å®ç° WebSocket å®æ—¶åŒæ­¥
- [ ] æ‰¹é‡å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
- [ ] 3D æ¨¡å‹æ ‡æ³¨åŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

MIT License
